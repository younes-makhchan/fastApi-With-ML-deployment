<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Student Performance Prediction</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</head>
<body>
    <header class="p-3 text-bg-dark">
        <div class="container">
            <div class="d-flex flex-wrap align-items-center  justify-content-around flex-row">
                <ul class="nav col-auto me-lg-auto mb-2 justify-content-around   mb-md-0">
                  <li class="col-auto"><a href="#" class="nav-link px-2 text-white fs-4">Performance Tester</a></li>
                 
                </ul>
                <ul class="d-flex nav col me-lg-auto align-text-end mb-2 justify-content-end   mb-md-0">
                    <li><a href="/" class="nav-link px-2 text-primary fs-4">Home</a></li>          
    
                    <li><a href="#mission" class="nav-link px-2 text-white fs-4">Mission</a></li>          
                    <li><a href="/visual.html" class="nav-link px-2 text-white fs-4">Our Analysis</a></li>          
                </ul>
              </div>
        
                <div class="text-end">
                  
                  <!-- <button type="button" class="btn btn-warning">Take Quiz</button> -->
                </div>
              </div>
        </div>
      </header>
      <div class="container col-xxl-8 px-4 py-5" style="height: 90vh;">
        <div class="row flex-lg-row-reverse align-items-center g-5 py-5">
          <div class="col-10 col-sm-8 col-lg-6">
            <img src="asian.jpg" class="d-block mx-lg-auto img-fluid rounded" alt="Bootstrap Themes" width="700" height="500" loading="lazy">
          </div>
          <div class="col-lg-6">
            <h1 class="display-5 fw-bold text-body-emphasis lh-1 mb-3">AI to Predict Your Final Score</h1>
            <p class="lead">Take a quiz now and check  if you going to pass this year or you need to prepare more ,The results might shock you!</p>
            <div class="d-grid gap-2 d-md-flex justify-content-md-start">
              <a href="#quiz" type="button" class="btn btn-primary btn-lg ">Try it for free <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down" viewBox="0 0 16 16">
                <path d="M3.204 5h9.592L8 10.481zm-.753.659 4.796 5.48a1 1 0 0 0 1.506 0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 0 0-.753 1.659"/>
              </svg> </a>
            </div>
          </div>
        </div>
      </div> 
      <div id="mission" style="padding-top: 150px;">

        <div class="bg-dark   d-flex justify-content-center flex-column align-items-center" style="padding-block: 150px;margin-bottom: 100px;">
          <h1 style="color: white aliceblue;" class="display-5 fw-bold  lh-1 mb-3 text-center text-white">Mission</h1>
          <p class="lead fs-3 text-center col-6 text-white">Our Mission is to provide Student  with an early prediction with their score, giving them chance  to act fast before their official result</p>
      
        </div>
    </div>


<div class="container my-5 " id="quiz">
    <div class="mb-4 text-center pb-4">
        <img src="image.png" width="80" />
                <h2 class="pt-4" >Let's Predict Your Score</h2>
                <p class="text-muted">Please fill out the form to get your predicted score</p>
            </div>
    <form id="predictionForm">
        <!-- Form fields -->
  <!-- Gender -->
  <div class="form-group row m-3">
    <label for="gender" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Gender:</label>
    <div class="col-sm-10">
        <select class="form-select" id="gender" name="gender">
            <option value="F">Female</option>
            <option value="M">Male</option>
        </select>
    </div>
</div>

<!-- Nationality -->
<div class="form-group row m-3">
    <label for="NationalITy" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Nationality:</label>
    <div class="col-sm-10">
        <select class="form-select" id="NationalITy" name="NationalITy">
            <option value="KW">Kuwait</option>
            <option value="lebanon">Lebanon</option>
            <option value="lebanon">Egypt</option>
            <option value="lebanon">SaudiArabia</option>
            <option value="lebanon">USA</option>
            <option value="lebanon">Jordan</option>
            <option value="venzuela">venzuela</option>
            <option value="Iran">iran</option>
            <option value="Iraq">Iraq</option>
            <option value="Lybia">Lybia</option>
            <option value="Palestine">Palestine</option>
            <option value="Morocco">Morocco</option>
            <option value="Morocco">Tunis</option>

            <!-- Add more options for other nationalities -->
        </select>
    </div>
</div>

<!-- Place of Birth -->
<div class="form-group row m-3">
    <label for="PlaceofBirth" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Place of Birth:</label>
    <div class="col-sm-10">
        <select class="form-select" id="PlaceofBirth" name="PlaceofBirth">
            <option value="KuwaIT">Kuwait</option>
            <option value="lebanon">Lebanon</option>
            <option value="lebanon">Egypt</option>
            <option value="lebanon">SaudiArabia</option>
            <option value="lebanon">USA</option>
            <option value="lebanon">Jordan</option>
            <option value="venzuela">venzuela</option>
            <option value="Iran">iran</option>
            <option value="Iraq">Iraq</option>
            <option value="Lybia">Lybia</option>
            <option value="Palestine">Palestine</option>
            <option value="Morocco">Morocco</option>
            <option value="Morocco">Tunis</option>

            <!-- Add more options for other places of birth -->
        </select>
    </div>
</div>

<!-- Educational Stage -->
<div class="form-group row m-3">
    <label for="StageID" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Educational Stage:</label>
    <div class="col-sm-10">
        <select class="form-select" id="StageID" name="StageID">
            <option value="lowerlevel">Lower Level</option>
            <option value="MiddleSchool">Middle School</option>
            <option value="HighSchool">High School</option>
        </select>
    </div>
</div>

<!-- Grade ID -->
<div class="form-group row m-3">
    <label for="GradeID" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Grade ID:</label>
    <div class="col-sm-10">
        <select class="form-select" id="GradeID" name="GradeID">
            <option value="G-02">G-02</option>
            <option value="G-04">G-04</option>
            <option value="G-05">G-05</option>
            <option value="G-06">G-06</option>
            <option value="G-07">G-07</option>
            <option value="G-08">G-08</option>
            <option value="G-09">G-09</option>
            <option value="G-10">G-10</option>
            <option value="G-10">G-11</option>
            <option value="G-10">G-12</option>

            <!-- Add more options for other grade levels -->
        </select>
    </div>
</div>

<!-- Section ID -->
<div class="form-group row m-3" style="display: none;">
    <label for="SectionID" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Section ID:</label>
    <div class="col-sm-10">
        <select class="form-select" id="SectionID" name="SectionID">
            <option value="A" selected>A</option>
            <option value="B">B</option>
            <option value="C">C</option>
        </select>
    </div>
</div>

<!-- Topic -->
<div class="form-group row m-3">
    <label for="Topic" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Topic:</label>
    <div class="col-sm-10">
        <select class="form-select" id="Topic" name="Topic">
            <option value="IT">IT</option>
            <option value="Math">Math</option>
            <option value="Arabic">Arabic</option>
            <option value="Science">Science</option>
            <option value="English">English</option>
            <option value="Guran">Quran</option>
            <option value="Guran">History</option>
            <option value="Frensh">Frensh</option>
            <option value="Spanish">Spanish</option>
            <option value="Frensh">Chemistry</option>
            <option value="Frensh">Geology</option>

            <!-- Add more options for other topics -->
        </select>
    </div>
</div>

<!-- Semester -->
<div class="form-group row m-3">
    <label for="Semester" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Semester:</label>
    <div class="col-sm-10">
        <select class="form-select" id="Semester" name="Semester">
            <option value="F">First</option>
            <option value="S">Second</option>
        </select>
    </div>
</div>

<!-- Relation -->
<div class="form-group row m-3">
    <label for="Relation" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Guardianship:</label>
    <div class="col-sm-10">
        <select class="form-select" id="Relation" name="Relation">
            <option value="Mum">Mother</option>
            <option value="Father">Father</option>
        </select>
    </div>
</div>

<!-- Raised Hands -->
<div class="form-group row m-3">
    <label for="raisedhands" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Raised Hands:</label>
    <div class="col-sm-10 align-items-center d-flex gap-2">
        <input type="range" max="100" min="0" class="form-control-range w-100" id="raisedhands" name="raisedhands" placeholder="Enter raised hands (0-100)"  
        oninput="updateVisitedResourcesValue(this.value,'VisITedResourcesValues')">
        <input type="text" class="form-control w-auto" id="VisITedResourcesValues" disabled readonly></div>
</div>

<!-- Visited Resources -->
<div class="form-group row m-3">
    <label for="VisITedResources" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Visited Resources:</label>
    <div class="col-sm-10 d-flex align-items-center gap-2">
        <input type="range" max="100" min="0" class="form-control-range w-100 mr-2" id="VisITedResources" name="VisITedResources" placeholder="Enter visited resources (0-100)"
         oninput="updateVisitedResourcesValue(this.value,'VisITedResourcesValue')">
        <input type="text" class="form-control w-auto" id="VisITedResourcesValue" disabled readonly>
    </div>
</div>
<script>function updateVisitedResourcesValue(value,idinput) {
    document.getElementById(idinput).value = value;
}</script>
<!-- Announcements View -->
<div class="form-group row m-3">
    <label for="AnnouncementsView" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Announcements View:</label>
    <div class="col-sm-10 align-items-center d-flex gap-2">
        <input type="range" max="100" min="0" class="form-control-range w-100 mr-2" id="AnnouncementsView" name="AnnouncementsView" placeholder="Enter announcements view (0-100)" 
        oninput="updateVisitedResourcesValue(this.value,'VisIedResourcesValue')">
        <input type="text" class="form-control w-auto" id="VisIedResourcesValue" disabled readonly>
    </div>
</div>

<!-- Discussion -->
<div class="form-group row m-3">
    <label for="Discussion" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Discussion:</label>
    <div class="col-sm-10 align-items-center d-flex gap-2">
        <input type="range" max="100" min="0" class="form-control-range w-100" id="Discussion" name="Discussion" placeholder="Enter discussion (0-100)" 
         oninput="updateVisitedResourcesValue(this.value,'VisIedRessourcesValue')">
        <input type="text" class="form-control w-auto" id="VisIedRessourcesValue" disabled readonly>
    </div>
</div>

<!-- Parent Answering Survey -->
<div class="form-group row m-3">
    <label for="ParentAnsweringSurvey" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Parent Answering Survey:</label>
    <div class="col-sm-10">
        <select class="form-select" id="ParentAnsweringSurvey" name="ParentAnsweringSurvey">
            <option value="Yes">Yes</option>
            <option value="No">No</option>
        </select>
    </div>
</div>

<!-- Parent School Satisfaction -->
<div class="form-group row m-3">
    <label for="ParentschoolSatisfaction" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Parent School Satisfaction:</label>
    <div class="col-sm-10">
        <select class="form-select" id="ParentschoolSatisfaction" name="ParentschoolSatisfaction">
            <option value="Bad">Bad</option>
            <option value="Good">Good</option>
        </select>
    </div>
</div>

<!-- Student Absence Days -->
<div class="form-group row m-3">
    <label for="StudentAbsenceDays" class="col-sm-2 col-form-label"><span class="text-danger">*</span>Student Absence Days:</label>
    <div class="col-sm-10">
        <select class="form-select" id="StudentAbsenceDays" name="StudentAbsenceDays">
            <option value="Above-7">Above 7</option>
            <option value="Under-7">Under 7</option>
        </select>
    </div>
</div>

        <button type="button" class="btn btn-primary m-4" id="predictButton" disabled><span id="predictButtonInner">Predict</span></button>
    </form>

    <div class="mt-4 d-none align-items-start justify-content-center" style="height:700px" id="predictionResult">
        <div class="d-flex flex-column gap-5 justify-content-center border  p-5 ">
            <strong id="result" class="fs-4"></strong>
            <a href="#" onclick="location.reload()" class="btn-lg btn btn-outline-secondary"> Try Again </a>
        </div>
    </div>

    <div class="mt-4 d-none align-items-start justify-content-center" style="height:700px" id="predictionSpinner">
        <div class="spinner-border" role="status">
            <span class="sr-only"></span>
          </div>
    </div>

</div>
<footer>
    <p href="#" class=" nd-block m-2 p-2 text-center border-top">All rights Reserved For Younes Makhchan and Anas Errami</p>
    </footer>



<!-- jQuery and Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<script>
    $(document).ready(function () {
        var isFormValid = false;

        // Disable the button initially
        $("#predictButton").prop("disabled", true);

        // Add event listener to form inputs
        $("#predictionForm :input").on("input", function () {
            isFormValid = $("#predictionForm :input").not("#predictButton").filter(function () {
                return $(this).val().trim() === "";
            }).length === 0;

            $("#predictButton").prop("disabled", !isFormValid);
        });

        $("#predictButton").click(function () {
            $("#predictButtonInner").text("Predicting...")
            // Collect form data
            var formData = {};
            $("#predictionForm :input").each(function () {
                var inputName = $(this).attr("name");
                var inputValue = $(this).val();

                // Check if the input value is a number
                if (!isNaN(inputValue) && inputValue !== "") {
                    // Parse the value to an integer
                    formData[inputName] = parseInt(inputValue, 10);
                } else {
                    // If it's not a number or an empty string, use the original value
                    formData[inputName] = inputValue;
                }
            });
            delete formData.undefined;
            
            $("#predictionForm").addClass("d-none");
            $("#predictionSpinner").removeClass("d-none").addClass("d-flex");

            // Send POST request to the API
            $.ajax({
                type: "POST",
                url: "https://fastapi-with-ml-deployment.onrender.com/predict",
                contentType: "application/json;charset=UTF-8",
                data: JSON.stringify(formData),
                success: function (response) {
                    // Hide spinner
                

                    var resultText = "";
                    if (response.Class === "H") {
                        resultText = "Your Score is going to be <span class='text-success'>High</span>, Great Job!";
                    } else if (response.Class === "M") {
                        resultText = "Your Score is going to be <span class='text-warning'>Medium</span>, Keep it up!";
                    } else {
                        resultText = "Your Score is going to be <span class='text-danger'>Low<span/>, Be Careful!";
                    }
                    $("#predictionSpinner").addClass("d-none");
                    $("#predictionResult").removeClass("d-none").addClass("d-flex")
                    // Display prediction result
                    $("#predictionResult #result").html( resultText);
                },
                error: function (error) {
                    console.log(error);
                    alert("Error occurred while making the prediction.");
                    // Hide spinner and show form
                    $("#predictionForm").removeClass("d-none");
                    $("#predictionSpinner").addClass("d-none");
                    $("#predictButtonInner").text("Predict")

                }
            });
        });
    });
</script>

</body>
</html>